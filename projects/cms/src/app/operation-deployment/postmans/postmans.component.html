<cms-page title="Quản lý bưu tá" [close]="false">
  <div action></div>
  <div content>
    <div nz-row class="mt-7" [nzGutter]="[16, 5]">
      <div
        nz-col
        class="mt-3"
        nzXs="12"
        nzSm="8"
        nzMd="6"
        nzLg="6"
        nzXl="4"
        nzXXl="4"
      >
        <nz-input-group
          class="width-full"
          [nzPrefix]="prefixIconSearch"
          [nzSuffix]="inputClearTpl"
        >
          <input
            type="text"
            nz-input
            placeholder="Nhập mã bưu tá"
            [(ngModel)]="keyword"
            (keyup.enter)="searchKeyWord()"
          />
        </nz-input-group>
        <ng-template #prefixIconSearch>
          <i nz-icon nzType="search" (click)="searchKeyWord()"></i>
        </ng-template>
        <ng-template #inputClearTpl>
          <i
            nz-icon
            class="ant-input-clear-icon"
            nzTheme="fill"
            nzType="close-circle"
            *ngIf="keyword"
            (click)="keyword = ''; searchKeyWord()"
          ></i>
        </ng-template>
      </div>
      <div
        nz-col
        class="mt-3"
        nzXs="12"
        nzSm="8"
        nzMd="8"
        nzLg="8"
        nzXl="4"
        nzXXl="4"
      >
        <nz-select
          class="width-full"
          nzShowSearch
          [ngModel]="postId"
          (nzScrollToBottom)="loadMore()"
          [nzDropdownRender]="renderTemplate"
          [nzDropdownRender]="renderTemplate"
          nzPlaceHolder="Chọn bưu cục"
          nzAllowClear
          (ngModelChange)="searchPost($event)"
        >
          <nz-option
            *ngFor="let o of listOfPost"
            [nzValue]="o.maBuuCuc"
            [nzLabel]="o.name"
          ></nz-option>
          <ng-template #renderTemplate>
            <nz-spin *ngIf="isLoadingScroll"></nz-spin>
          </ng-template>
        </nz-select>
      </div>
      <div
        nz-col
        class="mt-3"
        nzXs="12"
        nzSm="8"
        nzMd="8"
        nzLg="8"
        nzXl="2"
        nzXXl="2"
      >
        <button nz-button nzType="primary" (click)="searchKeyWord()">
          Tìm kiếm
        </button>
      </div>
    </div>
    <nz-table
      class="mt-5"
      #basicTable
      [nzData]="listOfData"
      [nzFooter]="footer"
      [nzFrontPagination]="false"
      [nzPageSize]="size"
      [nzPageIndex]="page"
      [nzTotal]="total"
      (nzPageIndexChange)="pageChange($event)"
    >
      <thead>
        <tr>
          <th nzWith="200px">Mã bưu tá</th>
          <th>Tên tài khoản</th>
          <th>Bưu cục</th>
          <th>SDT</th>
          <th>Tủ</th>
          <th>Đối tác vận chuyển</th>
          <th>Đăng nhập cuối</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of basicTable.data">
          <td>
            <a routerLink="detail/{{ data.userId }}">{{ data.userId }}</a>
          </td>
          <td>
            <a routerLink="detail/{{ data.userId }}">{{ data.userName }}</a>
          </td>
          <td>{{ data.maBuuCuc ? data.maBuuCuc : "-" }}</td>
          <td>{{ data.phoneNumber ? data.phoneNumber : "-" }}</td>
          <td>{{ data.lastLoginCabinet ? data.lastLoginCabinet : "-" }}</td>
          <td>{{ data.deliveryPartner ? data.deliveryPartner : "-" }}</td>
          <td>
            {{ data.lastLoginTime ? (data.lastLoginTime | dateText) : "-" }}
          </td>
        </tr>
      </tbody>
      <ng-template #footer>
        <span *ngIf="total">Tổng {{ total }} bản ghi</span>
      </ng-template>
    </nz-table>

    <div></div>
  </div>
</cms-page>
