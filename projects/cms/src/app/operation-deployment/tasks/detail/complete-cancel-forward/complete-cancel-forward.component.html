<div>
  <div *nzModalTitle>
    {{ complete ? "Hoàn Thành" : "Hủy" }}
  </div>
  <div>
    <form
      nz-form
      [formGroup]="editContentForm"
      (ngSubmit)="submitContent()"
      [nzLayout]="'vertical'"
      class="px-3"
    >
      <nz-form-item>
        <nz-form-label [nzSm]="22" [nzXs]="24" nzFor="note" nzRequired>
          <span>{{ complete ? "Ghi chú" : "Lí do" }}</span>
        </nz-form-label>
        <nz-form-control
          [nzSm]="24"
          [nzXs]="24"
          nzErrorTip="Vui lòng nhập nội dung!"
        >
          <nz-textarea-count [nzMaxCharacterCount]="100">
            <textarea rows="4" formControlName="note" nz-input></textarea>
          </nz-textarea-count>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-control [nzSm]="19" [nzXs]="19">
          <label
            nz-checkbox
            formControlName="checked"
            (ngModelChange)="changeStatus($event)"
          >
            Chuyển tiếp</label
          >
        </nz-form-control>
      </nz-form-item>
      <nz-form-item *ngIf="forward">
        <nz-form-label [nzSm]="22" [nzXs]="24" nzFor="deadline" nzRequired>
          <span>Deadline</span>
        </nz-form-label>
        <nz-form-control
          [nzSm]="24"
          [nzXs]="24"
          nzErrorTip="Vui lòng chọn ngày!"
        >
          <nz-date-picker
            formControlName="deadline"
            nzPlaceHolder="Chọn ngày"
            style="width: 100%"
          ></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item *ngIf="forward">
        <nz-form-label [nzSm]="22" [nzXs]="24" nzFor="receiver" nzRequired>
          <span>Người nhận</span>
        </nz-form-label>
        <nz-form-control
          [nzSm]="24"
          [nzXs]="24"
          nzErrorTip="Vui lòng chọn tên người nhận!"
        >
          <nz-select
            nzShowSearch
            nzServerSearch
            nzPlaceHolder="Nhập tên người nhận"
            formControlName="receiver"
            (nzScrollToBottom)="loadMore()"
            [nzShowArrow]="false"
            [nzDropdownRender]="renderTemplate"
            [nzFilterOption]="nzFilterOption"
            (nzOnSearch)="search($event)"
          >
            <nz-option
              *ngFor="let o of listOfOption"
              [nzLabel]="o.text"
              [nzValue]="o.value"
            ></nz-option>
          </nz-select>
          <ng-template #renderTemplate>
            <nz-spin *ngIf="isLoading"></nz-spin>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item *ngIf="forward">
        <nz-form-label [nzSm]="22" [nzXs]="24" nzFor="content" nzRequired>
          <span>Nội dung</span>
        </nz-form-label>
        <nz-form-control
          [nzSm]="24"
          [nzXs]="24"
          nzErrorTip="Vui lòng nhập nội dung!"
        >
          <input
            nz-input
            class="pl-3"
            id="content"
            formControlName="content"
            placeholder="Nhập nội dung"
          />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item *ngIf="forward">
        <nz-form-label [nzSm]="22" [nzXs]="24" nzFor="category" nzRequired>
          <span nz-typography>Type</span>
        </nz-form-label>
        <nz-form-control
          [nzSm]="24"
          [nzXs]="24"
          nzErrorTip="Vui lòng chọn type!"
        >
          <nz-select formControlName="type" nzPlaceHolder="Chọn loại công việc">
            <nz-option
              *ngFor="let o of listOfType"
              [nzLabel]="o.text"
              [nzValue]="o.value"
            ></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </form>
  </div>
  <div *nzModalFooter>
    <button
      nz-button
      nzType="primary"
      (click)="submitContent()"
      [nzLoading]="editSubmitting"
      class="m-2"
    >
      Cập nhật
    </button>
    <button nz-button nzType="default" (click)="cancelContent()">Hủy</button>
  </div>
</div>
